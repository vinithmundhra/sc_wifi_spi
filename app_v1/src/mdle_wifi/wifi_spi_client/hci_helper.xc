// Copyright (c) 2011, XMOS Ltd., All rights reserved
// This software is freely distributable under a derivative of the
// University of Illinois/NCSA Open Source License posted in
// LICENSE.txt and at <http://github.xcore.com/>

/*===========================================================================
 Filename: ${file_name}
 Project :
 Author  : ${user}
 Version :
 Purpose
 -----------------------------------------------------------------------------


 ===========================================================================*/

/*---------------------------------------------------------------------------
 include files
 ---------------------------------------------------------------------------*/
#include "hci_helper.h"

/*---------------------------------------------------------------------------
 constants
 ---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
 ports and clocks
 ---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
 typedefs
 ---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
 global variables
 ---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
 static variables
 ---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
 static prototypes
 ---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
 short_to_stream
 ---------------------------------------------------------------------------*/
void short_to_stream(unsigned char b[], unsigned short o, unsigned short v)
{
    b[o] = (unsigned char)(v);
    b[o+1] = (unsigned char)(v >> 8);
}

/*---------------------------------------------------------------------------
 int_to_stream
 ---------------------------------------------------------------------------*/
void int_to_stream(unsigned char b[], unsigned short o, unsigned int v)
{
    b[o] = (unsigned char)(v);
    b[o+1] = (unsigned char)(v >> 8);
    b[o+2] = (unsigned char)(v >> 16);
    b[o+3] = (unsigned char)(v >> 24);
}

/*---------------------------------------------------------------------------
 stream_to_short
 ---------------------------------------------------------------------------*/
unsigned short stream_to_short(unsigned char b[], unsigned short o)
{
    return (unsigned short)((unsigned short)((unsigned short)(b[o + 1]) << 8) + (unsigned short)(b[o]));
}

/*---------------------------------------------------------------------------
 stream_to_int
 ---------------------------------------------------------------------------*/
unsigned int stream_to_int(unsigned char b[], unsigned short o)
{
    return (unsigned int)((unsigned int)((unsigned int)(b[o + 3]) << 24) + (unsigned int)((unsigned int)(b[o + 2]) << 16) + (unsigned int)((unsigned int)(b[o + 1]) << 8) + (unsigned int)(b[o]));
}

/*---------------------------------------------------------------------------
 array_to_stream
 ---------------------------------------------------------------------------*/
void array_to_stream(unsigned char b[], char a[], unsigned short o, unsigned short l)
{
    for(int i = 0; i < l; i++)
    {
        b[o + i] = a[i];
    }
}

/*==========================================================================*/
